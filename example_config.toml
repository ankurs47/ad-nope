# Network Configuration
host = "0.0.0.0"
port = 5300      # Using 5300 for dev (requires sudo for 53)
disable_ipv6 = false # Set to true to block all AAAA (IPv6) queries

# Upstream DNS Servers
# format: <protocol>://<ip_or_host>:<port>
upstream_servers = [
  "h3://dns.google/dns-query",
  "h3://cloudflare-dns.com/dns-query",
  "quic://unfiltered.adguard-dns.com",
  "https://dns10.quad9.net/dns-query",
]

# Upstream Resolution Policy
# resolution_policy = "parallel" | "sequential" | "round-robin"
resolution_policy = "parallel"
upstream_timeout_ms = 200

# Bootstrap DNS
# Used to resolve domain names in `upstream_servers`
bootstrap_dns = ["8.8.8.8:53"]

# Allowlist
allowlist = []

# Local Records
# define custom domain -> IP mappings (A/AAAA records)
[local_records]
"my.router" = "192.168.1.1"
"dev.server" = "127.0.0.1"

# Blocklists
[blocklists]
hagezi-pro = "https://cdn.jsdelivr.net/gh/hagezi/dns-blocklists@latest/wildcard/pro-onlydomains.txt"
hagezi-fake = "https://cdn.jsdelivr.net/gh/hagezi/dns-blocklists@latest/wildcard/fake-onlydomains.txt"
hagezi-tif = "https://cdn.jsdelivr.net/gh/hagezi/dns-blocklists@latest/wildcard/tif-onlydomains.txt"
hagezi-doh-vpn-proxy-bypass = "https://cdn.jsdelivr.net/gh/hagezi/dns-blocklists@latest/wildcard/doh-vpn-proxy-bypass-onlydomains.txt"
hagezi-nosafesearch = "https://cdn.jsdelivr.net/gh/hagezi/dns-blocklists@latest/wildcard/nosafesearch-onlydomains.txt"
hagezi-dyndns = "https://cdn.jsdelivr.net/gh/hagezi/dns-blocklists@latest/wildcard/dyndns-onlydomains.txt"
hagezi-hoster = "https://cdn.jsdelivr.net/gh/hagezi/dns-blocklists@latest/wildcard/hoster-onlydomains.txt"
hagezi-anti-piracy = "https://cdn.jsdelivr.net/gh/hagezi/dns-blocklists@latest/wildcard/anti.piracy-onlydomains.txt"
hagezi-gambling = "https://cdn.jsdelivr.net/gh/hagezi/dns-blocklists@latest/wildcard/gambling-onlydomains.txt"
hagezi-nsfw = "https://cdn.jsdelivr.net/gh/hagezi/dns-blocklists@latest/wildcard/nsfw-onlydomains.txt"

# Caching
[cache]
enable = true
capacity = 10000
grace_period_sec = 10
min_ttl = 300

# Updates
[updates]
interval_hours = 24
concurrent_downloads = 4

# Logging
[logging]
enable = true
log_blocked = true
log_all_queries = true
format = "text"        # or "json"
# target is for general application logs (tracing).
# Deprecated for query logging, but kept for compatibility.
target = "console"
# query_log_sinks is specific for DNS query logs
query_log_sinks = ["console", "sqlite"]    # ["console", "file", "sqlite"]
level = "info"         # "error", "warn", "info", "debug", "trace"
# file_path = "ad-nope.log"
# syslog_addr = "127.0.0.1:514"

# Stats
[stats]
enable = true
log_interval_seconds = 300
